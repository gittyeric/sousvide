<!doctype html>
<html>
	<head>
		<title>sousvide</title>
        <link rel="stylesheet" media="screen and (min-device-width: 800px)" href="screen.css" />
        <link rel="stylesheet" href="main.css" />
		<link href='http://fonts.googleapis.com/css?family=Source+Sans+Pro:400,700|Source+Code+Pro' rel='stylesheet' type='text/css'>

		<script src="http://cdn.enderjs.com/ender.min.js"></script>
		<script src="sousvide.js"></script>
	</head>
	<body>
        <div id="temp_container"><span id="temp"></span> &deg;C</div>
		<section style="display:none;">
			<h2>timers</h2>
			<table id="timers">
			</table>
			<form action="/timer" method="POST">
				<input type="text" name="name" placeholder="New timer">
				<input type="text" name="h" placeholder="HH" class="time">
				<input type="text" name="m" placeholder="MM" class="time">
				<input type="text" name="s" placeholder="SS" class="time">
				<input type="submit" value="save">
			</form>
      <input type="submit" value="enable timer audio" id="enable_audio">
			<audio id="timernoise" src="/finished.ogg" preload="auto" volume="1"></audio>
		</section>
		<section style="display:none;">
			<h2>status</h2>
			<table>
				<tr>
					<td class="label heater_label">Heater is:</td>
					<td class="val">
						<a href="/enable" id="enabled"></a>,
						<span id="heating"></span>
					</td>
				</tr>
				<tr>
					<td class="label temp_label">Current temperature:</td>
					<td class="val"><span id="old_temp"></span> &deg;C</td>
				</tr>
				<tr>
					<td class="label target_label">Target temperature:</td>
					<td class="val">
						<span id="target_display">
							<span id="target"></span> &deg;C
						</span>
						<span id="target_change">
							<form method="POST" action="/target">
								<input type="text" id="target_input" name="target">
								<input type="submit" style="display:none;">
							</form>
						</span>
					</td>
				</tr>
				<tr>
					<td class="label error_label">Error:</td>
					<td class="val" id="err_td"><span id="abs_err"></span> &deg;C</td>
				</tr>
				<tr>
					<td class="label">
						Mean error per sample:
						<span class="subtext">
							Taken over 32-sample sliding window
						</span>
					</td>
					<td class="val">&plusmn;<span id="acc_err"></span> &deg;C/sample</td>
				</tr>
				<tr>
					<td class="label">
						Max overshoot:
						<span class="subtext">
							Taken over 32-sample sliding window
						</span>
					</td>
					<td class="val"><span id="max_err"></span> &deg;C</td>
				</tr>
			</table>
			<img src="/plot" id="plot">
		</section>
		<section style="display:none">
			<h2>controller</h2>
			<form method="POST" action="/pid">
				<table>
					<tr>
						<td>Proportional</td>
						<td class="val">
							<input type="text" class="pid_param" name="p" id="pid_p">
						</td>
					</tr>
					<tr>
						<td>Integral</td>
						<td class="val">
							<input type="text" class="pid_param" name="i" id="pid_i">
						</td>
					</tr>
					<tr>
						<td>Derivative</td>
						<td class="val">
							<input type="text" class="pid_param" name="d" id="pid_d">
						</td>
					</tr>
					<tr>
						<td></td>
						<td class="val">
							<input value="update" type="submit">
						</td>
					</tr>
				</table>
			</form>
		</section>
	</body>
</html>
